---
description: 分類ルールビルダーで下位分類を使用します。
title: 下位分類とルールビルダー
feature: Classifications
exl-id: 745d6149-bcb1-48ad-abbe-63a9d009fa27
source-git-commit: a40f30bbe8fdbf98862c4c9a05341fb63962cdd1
workflow-type: tm+mt
source-wordcount: '387'
ht-degree: 66%

---

# 下位分類とルールビルダー（レガシー）

すべての下位分類に親値が設定されている場合は、分類ルールビルダーを副分類と組み合わせることができます。

分類ルールビルダーを下位分類と組み合わせることで、分類の管理をシンプル化し、必要なルール数を削減できます。トラッキングコードに、個別に分類したいコードが含まれているような場合に、この方法を使用できます。

下位分類の概念情報については、[下位分類](/help/components/classifications/importer/subclassifications.md)を参照してください。

## 例

以下のようなトラッキングコードがあるとします。

`channel:broad_campaign:creative`

分類階層を使用すると、分類に対して分類を適用できます（*`sub-classification`* と呼びます）。つまり、複数のテーブルが含まれるリレーショナルデータベースのようにインポーターを使用することができます。あるテーブルでトラッキングコード全体をキーにマッピングし、別のテーブルでこれらのキーをさらに別のテーブルにマッピングします。

![](assets/sub_class_table.png)

この構造を設定したら、[ 分類ルールビルダー ](/help/components/classifications/crb/classification-rule-builder.md) を使用して、ルックアップテーブル（前の画像の緑と赤のテーブル）のみを更新する小さなファイルをアップロードできます。 次に、このルールビルダーを使用して、メインの分類テーブルを最新の状態に維持できます。

以下のタスクで、この実現方法を説明します。

## ルールビルダーを使用した下位分類の設定

ルールビルダーを使用してサブ分類をアップロードする方法についての手順の例です。

1. 分類マネージャーで分類と下位分類を作成します。

   例：

   ![ステップ情報](/help/admin/admin/assets/sub_class_create.png)

1. [ 分類ルールビルダー ](/help/components/classifications/crb/classification-rule-builder.md) で、元のトラッキングコードからサブ分類キーを分類します。

   この操作には、正規表現を使用します。この例では、*`Broad Campaign code`* を入力するルールで次の正規表現を使用します。

   | `#` | ルールタイプ | 次に一致 | 分類を設定 | 設定値 |
   |---|---|---|---|---|
   |   | 正規表現 | `[^\:]:([^\:]):([^\:])` | 幅広いキャンペーンコード | `$1` |
   |   | 正規表現 | `[^\:]:([^\:]):([^\:])` | クリエイティブコード | `$2` |

   >[!NOTE]
   >
   >この時点では、下位分類の *`Campaign Type`* および *`Campaign Director`* は入力しないでください。

1. 指定した下位分類のみを含む分類ファイルをアップロードします。

   「[複数レベルの分類](/help/components/classifications/importer/subclassifications.md)」を参照してください。

   例：

   | キー | チャネル | 幅広いキャンペーンコード | 幅広いキャンペーンコード&amp;Hat;キャンペーンタイプ | 幅広いキャンペーンコード&amp;Hat;キャンペーンディレクター | ： |
   |---|---|---|---|---|---|
   | &#42; |  | 111 | ブランド | Suzanne |  |
   | &#42; |  | 222 | ブランド | Frank |  |

1. 参照テーブルをメンテナンスするために、（この例のような）小さなファイルをアップロードします。

   例えば、新しい *`Broad Campaign code`* が導入されたときにこのファイルをアップロードします。このファイルは、以前に分類した値に適用されます。同様に、新しいサブ分類（*`Creative code`* のサブ分類な *`Creative Theme`*）を作成する場合は、分類ファイル全体ではなく、サブ分類ファイルのみをアップロードします。

   レポーティングでは、これらの下位分類はトップレベル分類と同様に機能します。これにより、分類の利用に必要となる管理上の負荷が軽減されます。
