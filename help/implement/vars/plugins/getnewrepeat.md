---
title: getNewRepeat
description: 新規訪問者とリピーターのアクティビティを追跡します。
translation-type: tm+mt
source-git-commit: 180ad544541f25d02b3a257559bc045abed7387b

---


# Adobeプラグイン：getNewRepeat

> [!IMPORTANT] このプラグインは、Adobe Analyticsからより多くの価値を引き出すのに役立つ、アドビコンサルティングによって提供されます。 アドビカスタマーケアは、インストールやトラブルシューティングを含め、このプラグインに対するサポートを行いません。 このプラグインに関するヘルプが必要な場合は、貴社のアカウントマネージャーにお問い合わせください。 担当コンサルタントとのミーティングを設定できます。

このプ `getNewRepeat` ラグインを使用すると、サイトへの訪問者が新しい訪問者か、再訪問者かを希望の日数以内に判断できます。 カスタム日数を使用して訪問者を「新規」として識別する場合は、このプラグインを使用することをお勧めします。 Analysis Workspaceの新規訪問者ディメンションと再訪問者ディメンションが組織のニーズを満たしている場合、このプラグインは不要です。

## Adobe Experience Platform Launch Extensionを使用してプラグインをインストールする

アドビでは、最も一般的に使用されるプラグインを使用できる拡張機能を提供しています。

1. Log in to [launch.adobe.com](https://launch.adobe.com) using your AdobeID credentials.
1. 目的のプロパティをクリックします。
1. 「拡張子」タブ [!UICONTROL に移動し] 、「カタログ」ボタンをクリッ [!UICONTROL クします] 。
1. Common Analytics Plugins  Extensionのインストールと公開
1. まだ「Initialize Plug-ins」というルールを作成していない場合は、次の設定を使用してルールを作成します。
   * 条件：なし
   * イベント：コア — ライブラリ読み込み済み（ページの上部）
1. 次の設定を使用して、上記のルールにアクションを追加します。
   * 拡張子：共通のAnalyticsプラグイン
   * アクションタイプ：getNewRepeatの初期化
1. ルールに対する変更を保存して発行します。

## カスタムコードエディターの起動を使用したプラグインのインストール

プラグイン拡張機能を使用しない場合は、カスタムコードエディターを使用できます。

1. Log in to [launch.adobe.com](https://launch.adobe.com) using your AdobeID credentials.
1. 目的のプロパティをクリックします。
1. 「拡張」タブ [!UICONTROL に移動し] 、Adobe Analytics拡張機能の [!UICONTROL 下にある「設定] 」ボタンをクリックします。
1. 「カスタムコー [!UICONTROL ドを使用してトラッキングを設定] 」アコーディオンを展開すると、「エディターを開く  」ボタンが表示されます。
1. カスタムコードエディターを開き、下に示すプラグインコードを編集ウィンドウに貼り付けます。
1. 変更を保存し、Analytics拡張機能に公開します。

## AppMeasurementを使用したプラグインのインストール

Analyticsトラッキングオブジェクトをインスタンス化した後（を使用して）、AppMeasurementファイルの任意の場所に次のコードをコピーして貼り付 `s_gi`けます。 コードのコメントとバージョン番号を実装に保持しておくと、アドビは潜在的な問題のトラブルシューティングに役立ちます。

```js
/******************************************* BEGIN CODE TO DEPLOY *******************************************/
/* Adobe Consulting Plugin: getNewRepeat v2.1 */
s.getNewRepeat=function(d){d=d?d:30;var s=this,p="s_nr"+d,b=new Date,e=s.c_r(p),f=e.split("-"),c=b.getTime();b.setTime(c+864E5*d); if(""===e||18E4>c-f[0]&&"New"===f[1])return s.c_w(p,c+"-New",b),"New";s.c_w(p,c+"-Repeat",b);return"Repeat"};
/******************************************** END CODE TO DEPLOY ********************************************/
```

## プラグインの使用

このメソ `getNewRepeat` ッドでは、次の引数を使用します。

* **`d`**（整数、オプション）:訪問者を再びリセットする間隔の最小日数`"New"`。 この引数を設定しない場合、デフォルトで30日に設定されます。

このメソッドは、プラグインによ `"New"` って設定されたcookieが存在しないか、有効期限が切れている場合の値を返します。 プラグインによって設 `"Repeat"` 定されたcookieが存在する場合、および現在のヒットからの経過時間とcookieに設定された時間が30分を超える場合の値を返します。 このメソッドは、訪問全体に対して同じ値を返します。

このプラグインは、引数と等しい「 `"s_nr[LENGTH]"` 」とい `[LENGTH]` う名前のcookieを使用し `d` ます。 cookieには、現在時刻と訪問者の現在のステータス(または`"New"` )を表すUnixタイムスタンプが含ま `"Repeat"`れます。

## 呼び出しの例

### 例1

次のコードでは、s.eVar1を新規訪問者の「New」の値に設定し、s.eVar1を（新規呼び出しのたびに）そのサイトへの訪問の残りの部分にわたって、「New」の値に設定し続けます。

```js
s.eVar1=s.getNewRepeat();
```

### 例2

訪問者が最後にs.getNewRepeat()が呼び出されてから31分から30日の間にサイトに戻ってきた場合、次のコードはs.eVar1を「Repeat」の値に設定し、訪問者の残りの訪問全体でs.eVar1を「Repeat」の値（新しい呼び出しごと）に設定し続けます。

```js
s.eVar1=s.getNewRepeat();
```

### 例3

訪問者が最後にs.getNewRepeat()が呼び出されてから30日以上サイトを訪問していない場合、次のコードはs.eVar1を「New」の値に設定し、訪問者の残りの訪問全体でs.eVar1を「New」の値に設定し続けます。

```js
s.eVar1=s.getNewRepeat();
```

### 例4

訪問者が最後にs.getNewRepeat()が呼び出されてから31分から365日（1年など）サイトに戻った場合、次のコードはs.eVar1を「Repeat」の値に設定し、残りの期間は「Repeat」の値（新しい呼び出しごとに）に設定し続けます。訪問者のサイトへの訪問。

```js
s.eVar1=s.getNewRepeat(365);
```

### 例5

訪問者が最後にs.getNewRepeat()が呼び出されてから365日（1年）以上サイトを訪問していない場合、次のコードはs.eVar1を「New」の値に設定し、残りの訪問者全体でs.eVar1を「New」の値に設定し続けますサイトへの訪問。

```js
s.eVar1=s.getNewRepeat(365);
```

## バージョン履歴

### 2.1（2019年9月30日）

* JavaScriptロジックを再配置し、プラグインサイズを削減

### 2.0（2018年4月17日）

* より小さいコードサイズで再コンパイル
* 訪問情報を保存するcookieに名前を付ける機能を削除しました。 プラグインは、引数に渡された値に基づいて、Cookieに動的に名前を付けるようになり `d` ました。
