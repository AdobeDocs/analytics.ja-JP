---
title: モジュールの統合
description: 統合モジュールを使用すると、アドビのパートナーは自社のデータ収集作業を組織と統合できます。
exl-id: 378ba77b-be81-49af-8f36-81c65bd01a53
source-git-commit: d198e8ef0ec8415a4a555d3c385823baad6104fe
workflow-type: tm+mt
source-wordcount: '880'
ht-degree: 98%

---

# モジュールの統合

統合モジュールを使用すると、アドビのパートナーは自社のデータ収集作業を組織と統合できます。この統合により、双方向のデータ接続の機会が得られます。通常、統合モジュールの使用はアドビのパートナーが主導します。

>[!NOTE]
>
>実装でパートナーデータをリクエストすると、ページ読み込みとアドビのデータ収集サーバーに送信されるデータの間に遅延が生じる可能性があります。データの送信前に訪問者が新しいページを読み込んだ場合、そのページは記録されません。

## 統合モジュールのワークフロー

1. サイトの訪問者が、パートナーデータの `get` リクエストを開始するページを読み込みます。
2. アドビのパートナーが `get` 要求を受け取り、適切な変数を JSON オブジェクトにパッケージ化します。JSON オブジェクトが返されます。
3. サイトが JSON オブジェクトを受け取り、`setVars` を呼び出して JSON オブジェクトに含まれる情報を Adobe Analytics 変数に割り当てます。
4. イメージリクエストがアドビデータ収集サーバーに送られます。

## 統合モジュールの実装

アドビのパートナーと連携している組織は、これらの手順を使用して統合モジュールの使用を正常に開始できます。

### 統合モジュールコードの取得

モジュールコードを取得するには、製品管理者のアクセス権を持つユーザー、またはコードマネージャーへのアクセス権を持つ製品プロファイルに属するユーザーである必要があります。モジュールコードの取得メソッドは、Adobe Experience Platform Launch を含め、すべての実装方法で同じです。

1. Adobe ID の資格情報を使用して [experiencecloud.adobe.com](https://experiencecloud.adobe.com) にログインします。
1. 右上の 9 つの正方形のアイコン、色付きの Analytics ロゴの順にクリックします。
1. 上部のナビゲーションで、**[!UICONTROL 管理者]**/**[!UICONTROL すべての管理者]**/**[!UICONTROL コードマネージャー]**&#x200B;をクリックします。
1. 最新の JavaScript appMeasurement ライブラリをダウンロードします。
1. ダウンロードが完了したら、ファイルを展開して `AppMeasurement_Module_Integrate.js` を見つけます。

### 実装に統合モジュールを配置する

サイトに統合モジュールを実装するには、Adobe Experience Platform Launch にアクセスする必要があります。レガシー JavaScript 実装を使用する場合は、組織の Web サイトソースコードへのアクセスが必要になります。

1. Adobe ID の資格情報を使用して [launch.adobe.com](https://launch.adobe.com) にログインします。
2. 編集する Launch プロパティをクリックします。
3. 「拡張機能」タブをクリックしてから、Adobe Analytics で「設定」をクリックします。
4. カスタムコードアコーディオンを使用してトラッカーの設定を開き、「&lt;/> エディターを開く」をクリックします。
5. 統合モジュールコードを、コードモーダルウィンドウに貼り付けます。完了したら「保存」をクリックします。

## 統合モジュールのメソッド

統合モジュールが実装されたら、これらのメソッドを使用して、目的のアドビパートナーからデータを送受信するよう設定します。

### 追加

`add` メソッドはパートナーシステムと実装の間でデータを共有する際、変数データの中間記憶領域となる、パートナーオブジェクトをインスタンス化します。このメソッドは、すべての統合に必要です。1 件の実装で複数のパートナーを使用する場合は、各個別パートナーに対して個別のパートナーオブジェクトを使用する必要があります。

```JavaScript
s.Integrate.add("<partner_name>");
```

通常、組織はアドビのパートナーと連携してパートナー名の値を決定します。

### beacon

`beacon` メソッドは、イメージリクエストを作成し、設定された URL を指します。これらのイメージリクエストは、標準のイメージリクエストとは異なります。ビーコンメソッドは、通常、アドビのデータ収集サーバーではなく、アドビのパートナーにデータを送信します。

```JavaScript
p.beacon("<partner_url>/track?qs1=value1&qs2=value2");
```

通常、組織はアドビのパートナーと連携してパートナー名の値を決定します。URL に含まれるクエリー文字列はオプションで、パートナーに依存します。ブラウザーのキャッシュを防ぐために、統合モジュールには、乱数を含むクエリー文字列が自動的に含まれます。

### delay

アドビは、このメソッドを文書化するよう、社内チームと作業を進めています。

### get

`get` メソッドを使用すると、クライアントはパートナー変数を読み込み、パートナーオブジェクトに保存できます。データがパートナーオブジェクトに含まれたら、Analytics 変数に割り当てられ、イメージリクエストで送信されます。このメソッドは、目的のデータを含む JSON オブジェクトを指す URL を呼び出します。

```JavaScript
s.Integrate.<partner_name>.get("<url_to_json_object>?pid=value1&pid2=value2");
```

* **パートナー名：**&#x200B;通常、組織はアドビのパートナーと連携してパートナー名の値を決定します。
* **JSON オブジェクトへの URL：**&#x200B;イメージリクエストに組み込むパートナー変数を含む JSON オブジェクトへの URL。
* **クエリー文字列パラメーター：**&#x200B;パートナーのシステム内で組織を識別するパートナーアカウント情報。アドビパートナーは、この情報を使用してデータセットを識別します。

統合モジュールは、自動的に URL にクエリー文字列を追加します。var クエリー文字列は、モジュールがパートナーから返されるよう想定する JSON オブジェクトの名前を指定します。また、ブラウザーのキャッシュを防ぐために、乱数も追加されます。

### Ready

アドビは、このメソッドを文書化するよう、社内チームと作業を進めています。

### useVars

`useVars` メソッドを使用すると、クライアントは変数の値をアドビのパートナーと共有できます。

```JavaScript
s.Integrate.<partner_name>.useVars = function (s,p) {
    p.<partner_var1> = s.eVar1;
    p.<partner_var2> = s.eVar2;
}
```

通常、組織はアドビのパートナーと協力して、パートナー名およびパートナーが使用する変数の値を決定します。

### setVars

`setVars` メソッドを使用すると、クライアントは取得したパートナーデータを使用して Analytics 変数を設定できます。パートナーデータは、`get` メソッド、静的割り当て、またはパートナーオブジェクトにデータを入力するその他のメカニズムの結果にすることができます。

```JavaScript
s.Integrate.<partner_name>.setVars = function (s,p) {
    s.eVar1 = p.<partner_var1>;
    s.eVar2 = p.<partner_var2>;
}
```

通常、組織はアドビのパートナーと協力して、パートナー名およびパートナーが使用する変数の値を決定します。

### script

`script` メソッドを使用すれば、特定の条件が満たされた場合（例：campaign 変数が設定されている場合）に、アドビのパートナーがパートナーサイトから追加の JavaScript を呼び出すことができます。

```JavaScript
p.script("<partner_url>/script?qs1=value1&qs2=value2");
```

通常、組織はアドビのパートナーと連携してパートナー名の値を決定します。URL に含まれるクエリー文字列はオプションで、パートナーに依存します。ブラウザーのキャッシュを防ぐために、統合モジュールには、乱数を含むクエリー文字列が自動的に含まれます。
