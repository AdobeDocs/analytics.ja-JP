---
description: 処理ルールの一般的な事例です。
subtopic: Processing rules
title: 処理ルールのユースケース
feature: Processing Rules
role: Admin
exl-id: 914a0d31-d256-456e-a44a-008490e86a23
source-git-commit: 0616f35599fd40ee8b88f7809f943bb11a84429b
workflow-type: tm+mt
source-wordcount: '831'
ht-degree: 24%

---

# 処理ルールのユースケース

組織内で処理ルールを使用する方法には、様々な用途があります。 以下の節では、これらを活用する一般的な方法について説明します。

+++コンテキストデータ変数の eVar へのコピー

処理ルールは、値を [&#x200B; コンテキストデータ変数 &#x200B;](/help/implement/vars/page-vars/contextdata.md) から [Prop](/help/components/dimensions/prop.md) および [eVars](/help/components/dimensions/evar.md) に移動するために使用されます。 処理ルールがないと、Analytics にレポートが出力されないため、コンテキストデータ変数は無意味となります。

[!UICONTROL &#x200B; コンテキスト変数 &#x200B;] リストには、過去 30 日間にレポートスイートに送信されたすべての変数が含まれています。 コンテキストデータ変数名がわかっているが、現在のレポートスイートに送信していない場合は、手動で追加できます。

![&#x200B; 処理ルールへのコンテキストデータ変数の手動追加 &#x200B;](assets/add-context-variable.png)

次の例では、`search_term` のコンテキストデータ変数を取得し、その値をeVar3 に配置します。

| ルールセット | 値 |
| --- | --- |
| 条件 | `search_term` （コンテキストデータ）が設定されています |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;]eVar3 と `search_term` （コンテキストデータ） |

![&#x200B; コンテキストデータ変数の使用を示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/set-context-data.png)

上記の例は、生成する eVar が少数の場合に適しています。組織に数百のコンテキストデータ変数があり、各変数に独自の eVar が必要な場合は、条件文を使用できます。多数の条件文を単一の処理ルールに含めることができるので、処理ルールの上限である 150 個の範囲内で、レポートスイート内のすべての eVar を生成できます。

次の例では、様々なコンテキストデータ変数を複数の変数に設定します。 1 つのアクションには、条件ステートメントも含まれます。

| ルールセット | 値 |
| --- | --- |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;]eVar55 と `spa.billing_customer_name` （コンテキストデータ） |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;]`testhierarchy` （コンテキストデータ）が設定されている場合、`testhierarchy`7 を Prop7 （コンテキストデータ）に設定 |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;]eVar8 と `spa.ims_org` （コンテキストデータ） |

![&#x200B; 条件付きで値を設定する方法を示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/add-conditional.png)

+++

+++コンテキストデータ変数を使用したイベントの設定

処理ルールは、[&#x200B; コンテキストデータ変数 &#x200B;](/help/implement/vars/page-vars/contextdata.md) に基づいてイベントをトリガー設定できます。

[!UICONTROL &#x200B; コンテキスト変数 &#x200B;] リストには、過去 30 日間にレポートスイートに送信されたすべての変数が含まれています。 コンテキストデータ変数名がわかっているが、現在のレポートスイートに送信していない場合は、手動で追加できます。

![&#x200B; 処理ルールへのコンテキストデータ変数の手動追加 &#x200B;](assets/add-context-variable.png)

次のルール定義は、特定のコンテキストデータ変数を含むすべてのヒットにイベントを設定します。

| ルールセット | 値 |
| --- | --- |
| 条件 | `search_term` （コンテキストデータ）が設定されています |
| アクション | [!UICONTROL &#x200B; イベントを設定 &#x200B;] Event1 から [!UICONTROL &#x200B; カスタム値 &#x200B;] `1` |

![&#x200B; イベントを設定する方法を示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/processing_rule_set_event.png)

+++

+++クエリ文字列パラメーターを使用して変数を入力します

クエリ文字列パラメーターを使用して変数に入力できます。 ほとんどの場合、通常は、目的のクエリ文字列値を取得するために実装を調整します。 ただし、これらのデータを収集するように実装を簡単に調整できない場合は、処理ルールが適切な代替手段です。 入力ミスなどの問題によって値を入力できない場合、処理ルールを使用して変数を入力できます。

値を上書きする前に、値が空かどうか、または期待値を含んでいるかどうかを常に確認してください。

| ルールセット | 値 |
| --- | --- |
| 条件 | キャンペーンが設定されていません |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;] [!UICONTROL &#x200B; クエリ文字列パラメーターを使用した Campaign] `cpid` |

![&#x200B; 条件付きキャンペーンロジックを示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/set-campaign-conditionally.png)

| ルールセット | 値 |
| --- | --- |
| 条件 | [!UICONTROL &#x200B; クエリ文字列パラメーター &#x200B;] `q` [!UICONTROL &#x200B; が設定されています &#x200B;] |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;] [!UICONTROL &#x200B; クエリ文字列パラメーター &#x200B;] を含む内部検索用語 `q` |

![&#x200B; 内部検索用語ロジックを示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/populate-internal-search-terms.png)

+++

+++任意のイベントの条件付き設定

イベントは、処理ルールで使用可能な任意の条件に基づいて設定できます。 例えば、ページ名が「Product overview」に等しい場合にイベントをトリガーできます。

| ルールセット | 値 |
| --- | --- |
| 条件 | [!UICONTROL &#x200B; ページ名 &#x200B;] が「製品の概要」に等しい場合 |
| アクション | [!UICONTROL &#x200B; イベント &#x200B;]&#x200B;[!UICONTROL &#x200B; 製品表示 &#x200B;] を [!UICONTROL &#x200B; カスタム値 &#x200B;] `1` に設定 |

![&#x200B; イベントセットを条件付きで表示する処理ルールインターフェイスのスクリーンショット &#x200B;](assets/set-product-view-event.png)

+++

+++カテゴリとページ名の連結によるサブカテゴリの追加

連結オプションを使用して他の値を組み合わせることによって値を入力できます。

| ルールセット | 値 |
| --- | --- |
| 条件 | なし（常に実行） |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;] eVar1 と [!UICONTROL &#x200B; 連結値 &#x200B;] カテゴリ + ページ名 |

![&#x200B; 連結された値を示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/add-subcategory-using-concat.png)

+++

+++レポート内の値のクリーンアップ

収集されたスペルミスに対して値を照合し、レポートに正しく表示されるように更新できます。

Adobeでは、不要な上書きを避けるために、可能な限り制限の厳しいマッチングオプションを使用することをお勧めします。 変数に関するレポートを実行し、使用する潜在的なルール条件を検索できます。 文字列の比較では、大文字と小文字は区別されません。

| ルールセット | 値 |
| --- | --- |
| 条件 | prop1[!UICONTROL &#x200B; 次で始まる &#x200B;] 「[!DNL Shoping]」の場合 |
| アクション | [!UICONTROL &#x200B; 値を上書き &#x200B;] Prop1 を [!UICONTROL &#x200B; カスタム値 &#x200B;] 「[!DNL Shopping]」で上書き |

![&#x200B; タイプミスを修正する方法を示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/clean-up-values-in-report.png)

+++

+++ヒットからのイベントの削除

処理ルールを使用すると、実装を変更せずに、ヒットから特定のイベントを削除または破棄できます。 イベントをカスタム値 `0` に設定した場合、イベントはカウントされません。

| ルールセット |値 |
|条件 |なし（常に実行） |
| アクション | [!UICONTROL &#x200B; イベントを設定 &#x200B;] Event1 を [!UICONTROL &#x200B; カスタム値 &#x200B;] `0` に |

![&#x200B; イベントを削除するようを示す処理ルールインターフェイスのスクリーンショット &#x200B;](assets/remove_event.png)

+++
