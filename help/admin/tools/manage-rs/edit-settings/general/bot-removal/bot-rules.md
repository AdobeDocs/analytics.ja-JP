---
description: ボットルールを使用すると、既知のスパイダーやボットによって生成されるトラフィックを、レポートスイートから削除できます。ボットトラフィックを削除すると、web サイト上のユーザーアクティビティをより正確に測定できます。
title: ボットルールの理解と設定
feature: Bot Removal
role: Admin
exl-id: 1c0009f6-2746-4ef1-8dcb-e2693617e91e
source-git-commit: 8b1e25b9633b6db3e49da079f7014e6b7b595474
workflow-type: tm+mt
source-wordcount: '1669'
ht-degree: 42%

---

# ボットルールの理解と設定

ボットルールを使用すると、既知のスパイダーやボットによって生成されるトラフィックをレポートスイートから削除できます。ボットトラフィックを削除すると、web サイト上のユーザーアクティビティをより正確に測定できます。

ボットルールを定義すると、すべての受信トラフィックを定義済みのルールを比較します。これらのルールのいずれかと一致するトラフィックは、レポートスイートで収集されず、トラフィック指標には含まれません。

ボットトラフィックを削除すると、通常はトラフィックとコンバージョン指標の量が減少します。 多くのお客様は、ボットトラフィックを削除するとコンバージョン率が向上し、他のユーザビリティ指標が増加することを確認しています。

ボットトラフィックデータは、ボットおよびボットページレポートに表示するために、別のリポジトリに保存されます。

>[!NOTE]
>
>Adobe Experience Platform Edge Networkは、ヒットをボットであると識別するラベル付けされた [&#x200B; ボット検出サービス &#x200B;](https://experienceleague.adobe.com/docs/experience-platform/datastreams/bot-detection.html?lang=ja) を提供します。 Adobe Analyticsで使用されるボット検出プロセスは別個のもので、Edge Networkを通じて到達するデータに含まれるボットスコアは参照されません。 ただし、2 つのシステムは同じ IAB ボットリストを使用します。

## ボットルールの更新またはアップロード

>[!IMPORTANT]
>
>ボットトラフィックを削除する前に、関係者とコミュニケーションを取り、この変更の結果として重要パフォーマンス指標に対して必要な調整を行うことができることを確認します。 調整が可能な場合は、最初に小規模なレポートスイートからボットトラフィックを削除して、発生する可能性がある影響を予測することをお勧めします。


>[!BEGINSHADEBOX]

デモビデオについては、![VideoCheckedOut](/help/assets/icons/VideoCheckedOut.svg) [&#x200B; ボットルールの設定 &#x200B;](https://experienceleague.adobe.com/ja/docs/analytics-learn/tutorials/administration/manage-report-suites/configure-bot-rules-in-analytics){target="_blank"} を参照してください。

>[!ENDSHADEBOX]


ボットルールを更新またはアップロードするには：

1. **[!UICONTROL Analytics]**/**[!UICONTROL 管理者]**/**[!UICONTROL レポートスイート]** に移動します。

1. ボットルールを更新するレポートスイートを選択して、**[!UICONTROL 設定を編集]**/**[!UICONTROL 一般]**/**[!UICONTROL ボットルール]** を選択します。

1. レポートスイートのボットルールを更新またはアップロードするには、次のいずれかのオプションを使用します。

   * [!UICONTROL **IAB ボットフィルタリングルールを有効にする**] を選択して、IAB （国際Advertising局）の国際スパイダー&amp;ボットリストのボットを削除し、ボットトラフィックを削除します。

     このオプションを少なくとも選択することをお勧めします。

     詳しくは、以下の節 [&#x200B; 標準 IAB ボットルール &#x200B;](#standard-iab-bot-rules) を参照してください。

   * ユーザーエージェント、IP アドレス、または IP 範囲に基づいてカスタムボットルールを定義および追加するには、「[!UICONTROL **ルールを追加**]」を選択します。

     詳しくは、以下の節 [&#x200B; カスタムボットルール &#x200B;](#custom-bot-rules) を参照してください。

   * [!UICONTROL **読み込む CSV ボットファイルを選択**] 領域の横にある「[!UICONTROL **ファイルを選択**]」を選択したあと、ボットルールを定義する CSV ファイルを選択します。

     詳しくは、以下の節 [&#x200B; ボットルールのアップロード &#x200B;](#upload-bot-rules) を参照してください。

1. 「[!UICONTROL **保存**]」を選択します。

## 標準 IAB ボットルール

標準 IAB ボットルールは、「[!UICONTROL IAB ボットフィルタールールを有効にする]」チェックボックスをオンにすることで有効にできます。この選択により、ボットトラフィックを削除するために、IAB（International Advertising Bureau）の「International Spiders &amp; Bots List」のボットが削除されます。アドビは、IAB からこのリストを毎月更新します。

![](/help/admin/tools/manage-rs/edit-settings/general/bot-removal/assets/bot-iab-checkbox.png)

アドビは詳細な IAB ボットリストをお客様に提供できませんが、ボットレポートを使用して、サイトにアクセスしたボットのリストを表示できます。ボットを IAB リストに送信するには、[IAB](https://www.iab.com) にアクセスします。

レポートスイートで標準 IAB ボットルールを有効にする方法については、[&#x200B; ボットルールの更新またはアップロード &#x200B;](#update-or-upload-bot-rules) を参照してください。

## カスタムボットルール

>[!NOTE]
>
>：ユーザーインターフェイスでは 500 個のルールを手動で定義することが可能です。この制限を超える場合は、「ファイルのインポート」および「ボットルールをエクスポート」オプションを使用して、ルールを一括処理する必要があります。

カスタムボットルールを使用すると、定義した条件に基づいてトラフィックをフィルタリングできます。 レポートスイートでカスタムボットルールを有効にするプロセスを開始するには、[&#x200B; ボットルールの更新またはアップロード &#x200B;](#update-or-upload-bot-rules) を参照してください。

カスタムボットルールは、次の条件タイプを使用して定義されます。

* ユーザーエージェント
* IP アドレス
* IP 範囲

1 つのルールに対して複数の条件を定義できます。 「or」を使用すると、複数の条件を照合できます。 例えば、ユーザーエージェントと IP アドレスに値を指定した場合、いずれかの条件が満たされると、そのトラフィックはボットトラフィックと見なされます。

### ユーザーエージェント

ユーザーエージェントの条件では、そのユーザーエージェントの値を調べて、指定した文字で&#x200B;**[!UICONTROL 始まる]**&#x200B;か、その文字を&#x200B;**[!UICONTROL 含む]**&#x200B;かを判断します。「**[!UICONTROL 次を含む]**」を選択した場合、ユーザーエージェントの任意の場所に指定した文字が含まれていれば、一致と見なされます。

オプションの値を「**[!UICONTROL 次を含まない]**」リストに含めることで、照合を正常に行うためにユーザーエージェントに含めない値を定義できます。1 行に 1 つの値を含めることで、複数の値を指定できます。 ユーザーエージェントが一致文字列で指定された条件を満たしていても、含まないリストに文字列が含まれている場合、そのエージェントは一致と見なされません。

「**[!UICONTROL 次を含む]**」フィールドに入力できるのは 100 文字までです。「次を含まない」リストは、255 文字から各改行の区切り文字を引いた文字に制限されます。 （区切り文字の数は文字列の数から 1 を引いた数になります。4 を指定する場合 *文字列を含まない*、3 つの区切り文字が必要です。） すべての文字列の一致では、大文字と小文字が区別されません。

### IP アドレス（ワイルドカードの照合を含む）

1 つの IP アドレスと照合するか、ワイルドカード（&#42;）を使用して同じブロック内の複数のアドレスと照合します。照合する IP アドレスの数値を指定します。ワイルドカードを使用して照合する場合、どのような値にも一致させたい部分に &#42; を使用します。次に、IP アドレスの照合文字列の例を示します。

```
10.10.10.1
10.10.10.*
```

### IP アドレスの範囲

照合する IP アドレスの開始と終了の範囲を指定します。ワイルドカードを使用して照合する場合、どのような値にも一致させたい部分に &#42; を使用します。

### カスタムボットルールを定義する

1. **[!UICONTROL Analytics]**／**[!UICONTROL 管理者]**&#x200B;に移動し、1 つまたは複数のレポートスイートを選択して、**[!UICONTROL 一般]**／**[!UICONTROL ボットルール]**&#x200B;をクリックします。
1. 「**[!UICONTROL ルールの追加]**」をクリックし、1 つまたは複数の照合条件を定義します。
1. 「**[!UICONTROL 保存]**」をクリックします。変更が反映されるまで、最大 30 分かかります。

## ボットルールのアップロード

ボットルールを一括読み込みするには、ルールを定義した CSV ファイルをアップロードします。

1. ボットルールをレポートスイートにアップロードするプロセスを開始するには、[&#x200B; ボットルールの更新またはアップロード &#x200B;](#update-or-upload-bot-rules) を参照してください。

1. スプレッドシートの 1 行目に、表示された順序で次の列を含む CSV ファイルを作成します。

   | 列 1、行 1 | 列 2、行 1 | 列 3、行 1 | 列 4、行 1 | 列 5、行 1 | 列 6、行 1 |
   |--- |--- |---|---|---|---|
   | ボットの名前 | IP 開始 | IP の終了値 | ルール <br> （次の値を含む、または次の値で始まる） </br> | ユーザーエージェントの組み込み | ユーザーエージェントの除外 <br> （255 文字の制限） </br> |

   次の 3 種類のボットルールを定義できます。

   * ユーザーエージェントに次が含まれているか、で始まる
   * 単一の IP アドレスまたはワイルドカード一致
   * IP 範囲の一致

   インポートファイルの各行には、次のボット定義のいずれか 1 つのみを含めることができます。

   >[!NOTE]
   >
   >   OR で結合されたルールの組み合わせ（ユーザーエージェント、IP アドレスなど）を使用してボットを照合するには、組み合わせるすべてのルールに対してボット名フィールドに同じ名前を指定します。 AND の一致はサポートされていません。


   * **ユーザーエージェントに次が含まれる、または次で始まる**：一致するユーザーエージェント文字列を「エージェントインクルード」列に指定します。 「エージェントの一致ルール」フィールドに、「*次を含む*」または「*次で始まる*」を入力して、実行する照合のタイプを指定します。「以下を含まないエージェント」列には、必要に応じて値を指定できます。この値は、エージェントに含まれない 1 つまたは複数の文字列をパイプ記号（`|`）で区切って定義します。文字列の一致では、大文字と小文字が区別されません。 IP 開始列と IP 終了列の両方が空である必要があります。

   * **単一の IP アドレスまたはワイルドカードの一致**：単一の IP アドレス（`10.10.10.1`）またはワイルドカード IP アドレス（`10.10.*.*`）を一致させるには、「IP の開始値」列と「IP の終了値」列の両方に同じ値を指定します。「一致ルール」、「以下を含むエージェント」、「以下を含まないエージェント」は空にする必要があります。

   * **IP 範囲の一致**：IP の開始値列と IP の終了値列を使用して、IP アドレスの範囲を定義します。IP 範囲の一致にワイルドカードを使用できます（例：`10.10.10.*` から `10.10.20.*`）「一致ルール」、「以下を含むエージェント」、「以下を含まないエージェント」は空にする必要があります。

1. Report Suite Manager のボットルールページで、「[!UICONTROL **読み込む CSV ボットファイルを選択**] 領域の横にある「[!UICONTROL **ファイルを選択**]」を選択し、読み込むボットルールを定義する CSV ファイルを選択します。

1. （オプション）「**[!UICONTROL 既存のルールを上書き]**」チェックボックスを選択して既存のルールをすべて削除し、アップロードファイルで定義されているルールに置き換えます。

1. [!UICONTROL **ファイルをインポート**] を選択します。

1. [!UICONTROL **ルール セット**] 領域で、インポートされたルールを確認します。

1. 「[!UICONTROL **保存**]」を選択します。

## ボットルールをエクスポート

UI で定義されているすべてのルールを CSV 形式で書き出す手順は、次のとおりです。

1. **[!UICONTROL Analytics]**/**[!UICONTROL 管理者]**/**[!UICONTROL レポートスイート]** に移動します。

1. 書き出すボットルールを含んだレポートスイートを選択し、**[!UICONTROL 設定を編集]**/**[!UICONTROL 一般]**/**[!UICONTROL ボットルール]** を選択します。

1. 「**[!UICONTROL ボットルールを書き出し]**」を選択し、CSV ファイルをファイルシステムに保存します。

## データ収集に対するボットルールの影響 {#section_F01A3130E7A04A9993371CF26F6586F2}

ボットルールは、すべての解析データに適用されます。ボットルールによって削除されたデータは、ボットレポートとボットページレポートにのみ表示されます。

ボットルールの後に VISTA ルールが適用されます。テクニカルノートユーザーガイドの[処理順序](/help/technotes/processing-order.md)を参照してください。

**高ヒットの訪問処理：** 訪問で発生したヒット数が 100 を超える場合、レポートでは、訪問時間（秒単位）が訪問のヒット数以下であるかどうかを判断します。 このような場合、長時間の激しい訪問を処理するコストが原因で、レポートは新しい訪問からやり直されます。 高ヒット訪問は、通常、ボット攻撃によって発生し、通常の訪問者ブラウジングとは見なされません。

>[!NOTE]
>
>*`bots`* としてマークされたヒットは[サーバーコール](/help/admin/tools/server-call-usage/overage-overview.md)として請求されます。

## ボットフィルタリングに対する IP の不明化の影響 {#section_92E60B95BE8940D983F28C79E0CD6B12}

IAB ボットリストはユーザーエージェントのみに基づいているので、そのリストに基づくフィルタリングは、IP の不明化設定の影響を受けません。 非 IAB ボットフィルタリング（カスタムルール）の場合、IP はフィルタリング条件の一部の可能性があります。 IP を使用してボットをフィルタリングする場合、ボットフィルタリングは、その設定が有効な場合は最後のオクテットが削除された後、IP 全体の削除や一意の ID への置き換えなど、他の IP の不明化オプションの前に行われます。

つまり、IP の不明化を有効にすると、IP アドレスが不明化される前に IP の除外が行われるので、設定の変更などの対応は不要です。

最後のオクテットが削除された場合は、IP フィルタリングの前に行われます。 最後のオクテットが 0 に置換されるので、末尾が 0 の IP アドレスに一致するように IP 除外ルールを更新します。「&#42; に一致」は、0 にも一致します。
