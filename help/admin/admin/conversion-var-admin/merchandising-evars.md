---
title: マーチャンダイジングeVarと製品検索方法
description: マーチャンダイジングeVarの概念と、eVarがデータを処理および割り当てる方法について詳しく説明します。
source-git-commit: 6f98366a58c7c249c474d9f4474faa1676cdf1ea
workflow-type: tm+mt
source-wordcount: '1486'
ht-degree: 1%

---

# マーチャンダイジングeVarと製品検索方法

このドキュメントでは、マーチャンダイジングeVarの概念を説明します。マーチャンダイジングeVarは、標準eVarとは異なる方法でデータを処理および割り当てします。 また、マーチャンダイジングeVarと製品検索方法との関係についても説明します。

ほとんどの小売Webサイトには商品を見つける方法が多数ありますが、Adobeでは、Adobe Analyticsですべての小売クライアントが追跡する必要がある基本的な商品検索方法は次のとおりと見なします。

* 内部検索キーワード
* 内部キャンペーントラッキングコード
* マーチャンダイジング/閲覧のカテゴリ
* クロス販売リンク

このドキュメントの目的上、次のようにeVarをいくつかソリューションにマッピングします。

* eVar2:内部検索キーワード
* eVar3:内部キャンペーントラッキングコード
* eVar4:マーチャンダイジング/閲覧のカテゴリ
* eVar5:クロス販売リンク

追加のeVarを使用して、すべての製品検索方法のパフォーマンスを相互に測定できます。 上記の検索方法に加えて、外部のWebサイトからの製品の詳細ページへのリンクなど、比較対象となる他の検索方法もeVarに含まれます。

* eVar1:製品検索方法

これらの変数を標準のeVarに設定する代わりに、マーチャンダイジングeVarに設定します。 マーチャンダイジングeVarを使用すると、eVarによって取り込まれた値に、*訪問あたり/注文あたり*&#x200B;レベルではなく&#x200B;*製品ごとの*&#x200B;レベルで成功したアクティビティを割り当てることができます。 このドキュメントでは、全体を通して、製品ごとの配分と注文ごとの配分の違いを明確にします。

これらの変数の設定方法を示すために、訪問者が内部キーワード検索「サンダル」を使用してサイト上の製品を検索する例を以下に示します。 キーワード検索結果ページで、データを少なくとも2つのeVarに取り込む必要があります。

* `eVar2` が検索で使用されたキーワード（「サンダル」）と等しい
* `eVar1` が、使用する製品の検索方法（「内部キーワード検索」）と等しい。

これらの2つの変数をこれらの特定の値に等しく設定すると、訪問者が内部キーワード検索用語「サンダル」を使用して製品を見つけることがわかります。 同時に、訪問者が他の製品検索方法を使用して商品を検索していないことがわかります（例えば、訪問者がキーワード検索を実行するのと同時に、商品カテゴリを閲覧していない場合など）。 製品ごとの適切な配分を確実におこなうために、これらの未使用の方法は、内部キーワード検索で見つかった製品を見つけ出すクレジットを受け取らないでください。 したがって、他の検索方法に関連付けられたeVarを自動的に「非検索方法」の値に設定するロジックをコード（AppMeasurement、AEP Web SDKなど）に挿入する必要があります。

例えば、ユーザーが「サンダル」というキーワードを使用して製品を検索する場合、Analyticsコードのロジックでは、内部キーワード検索結果ページで変数を次と等しく設定する必要があります。

* eVar2=&quot;サンダル&quot;:内部キーワード検索で「サンダル」というキーワードが使用された
* eVar1=&quot;内部キーワード検索&quot;:「内部キーワード検索」検索方法が使用されました。
* eVar3=&quot;非内部キャンペーン&quot;:内部キャンペーンが検索結果ページへのアクセスに使用されなかった
* eVar4=&quot;non-browse&quot;:検索結果ページで参照カテゴリにアクセスできませんでした
* eVar5=&quot;non-cross-sell&quot;:検索結果ページでクロス販売リンクがクリックされなかった問題を修正しました。

## マーチャンダイジングeVar設定

「サンダル」の例を続ける前に、マーチャンダイジングeVarで使用できる様々な設定を以下に示します。  Report Suite Managerのスクリーンショットを次に示します。 この機能にアクセスするには、 Analytics /管理者/レポートスイート/設定を編集/コンバージョン/コンバージョン変数/新規追加/マーチャンダイジングを有効にします。

![](assets/merch-evars1.png)

表の下の節で、これらの設定の詳細を説明します。

| 設定 | 説明 |
|--- | --- |
| 名前 | 変数を関連付ける名前、またはレポートディメンション。 `eVar1`が製品検索方法を取り込む場合は、`eVar1`の「名前」フィールドを「製品検索方法」に設定する必要があります。 |
| マーチャンダイジング | マーチャンダイジングeVar値の取得に使用される構文のタイプ |
| 配分 | が、成功したイベントが発生したときにクレジットを受け取る必要があるマーチャンダイジングeVar値を決定するのに役立ちます。 |
| 有効期限 | 既存の製品とマーチャンダイジングeVarの連結を有効にしないタイミングを指定します。 |
| タイプ | マーチャンダイジングデータで収集されるeVarのタイプ |
| マーチャンダイジングバインディングイベント | 製品をマーチャンダイジングeVar値に結び付けるタイミングを決定するイベント |
| リセット | その時点でeVarのすべてのバックエンドデータをリセットするトリガー |
| マーチャンダイジングを有効にする | eVarを標準eVarからマーチャンダイジングeVarに変換するには、「有効」に設定する必要があるフラグ |

### マーチャンダイジング

このオプションは、通常のeVarでは使用できません。 [!UICONTROL マーチャンダイジング]設定を使用すると、マーチャンダイジングeVarの値を取り込む方法として、[!UICONTROL コンバージョン変数の構文]または[!UICONTROL 製品の構文]を選択できます。

**[!UICONTROL コンバージョン変]** 数構文とは、ユーザーが独自の変数にeVar値を設定したことを意味します。例えば、コンバージョン変数の構文を使用する場合、「内部キーワード検索」の`eVar1`値は、ページコード（またはAppMeasurementコード、AEP Web SDKコードなど）内で次のように設定されます。

`s.eVar1="internal keyword search";`

ただし、**[!UICONTROL 製品の構文]**&#x200B;を使用すると、eVarはAdobe Analytics製品変数内にのみ設定されます。 Analyticsの製品変数は、製品ごとに6つの異なる部分に分かれています。

`s.products="[category];[productID];[quantity];[revenue];[events];[eVars]"`

*  Categoryは非推奨（廃止予定）の機能で、製品カテゴリのパフォーマンスを追跡するための実行可能なオプションとして推奨されなくなりました。単なる存在は、products変数のほとんどの実装で、変数値のproductID部分の前に1つのセミコロンを置く理由を示しています。
*  数量と売  上高は、製品購入が追跡されている場合に役立ちます。
*  イベントは、売上高としてカウントされないカスタムの増分イベント値または通貨イベント値（送料、割引など）を記録するのに役立ちます。

製品構文を使用するように設定されたマーチャンダイジングeVarは、products変数の最後の部分に設定されます。 例えば、訪問者が内部のキーワード検索を使用して製品ID「12345」を見つけたとします。 この例でeVar1を設定する際の製品の構文に基づく方法は、次のようになります。

`s.products=";12345;;;;eVar1=internal keyword search";`

products変数の量、売上高、イベント部分のセミコロン区切りのプレースホルダーが残っていることに注意してください。  これらのプレースホルダーがないと、内部キーワード検索の`eVar1`設定は完全に無視されます。

### 配分

マーチャンダイジングeVarに対する「配分」という用語は、特にコンバージョン変数構文を使用するマーチャンダイジングeVarに対する誤った用語です。 標準の構文を使用するすべてのeVarには、独自の割り当て設定を使用できますが、コンバージョン変数構文を使用するマーチャンダイジングeVarでは、Report Suite Managerでの割り当て設定に関係なく、「最新（最後）」の割り当て設定のみを使用します。

この設定が何を意味するかを理解するには、eVar割り当てとマーチャンダイジングeVarバインディングの違いを理解する必要があります。  マーチャンダイジングeVarの場合、「マーチャンダイジングeVarバインディング」は、この「配分」設定の方が適切な名前と見なされます。
標準構文のeVarがイメージリクエストから収集されるたびに、Adobe Analytics処理サーバーは通常のeVar列の横にあるpost_evar列と呼ばれる別のデータベース列にを挿入します。  eVarは永続的なもの（つまり、ほとんどの場合、現在のヒットの後のある時点で期限切れになる）ので、サーバーは後続のイメージリクエストのたびにこのpost_evar列を設定し、対応するeVarに渡された最後の値に設定します。 標準（マーチャンダイジング以外）のeVarで成功イベントが発生すると、Adobe Analyticsは通常のeVar列ではなくpost_evar列を使用して、イベントのクレジットとして付与するeVar値を決定します。
標準（マーチャンダイジング以外）のeVarの場合、配分設定によって、特定の期間に収集された最初のeVar値と最後のデータ値のどちらをpost_evar列に挿入するかが決まります。 標準eVarの配分設定が「元の値（最初）」に等しい場合、訪問者から収集された最初のeVar値が、それ以降のすべてのイメージリクエストのpost_evar列に挿入されます。  これは、eVarが「有効期限」設定に従って期限切れになるまで、この訪問者のブラウザーから送信される今後のすべてのリクエストに対して続行されます。\
標準eVarの配分設定が「最新（最後）」に等しい場合、訪問者から収集された最新のeVar値は、後続のすべてのイメージリクエストのpost_evar列に入力されます。 「最新（最後）」の配分は、どのイメージリクエストでも、対応するeVarが新しい値に設定されるたびにpost_evarの値が変更されることを意味します。  「元の値（最初）」の配分は、今後のイメージリクエストで対応するeVarが異なる値に設定される場合でも、post_evar列がヒット間で変化しないことを意味します。
前述したように、コンバージョン変数構文を持つすべてのマーチャンダイジングeVarには、(標準eVar定義ごとの)「最新（最後）」のみが割り当てられています。  したがって、「配分」設定がマーチャンダイジングeVarに対して実際に何を意味するかを説明する必要があります。  前述のとおり、訪問者が引き続きサイトを使用するので、この設定ではpost_evar列に挿入される値は決定されません。  マーチャンダイジングeVarの配分設定によって、製品に結び付けられるeVar値と、その製品で割り当てる方法が決まります


