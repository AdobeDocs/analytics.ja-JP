---
description: ボットルールを使用すると、既知のスパイダーやボットによって生成されるトラフィックを、レポートスイートから削除できます。ボットトラフィックを削除すると、Webサイト上のユーザアクティビティをより正確に測定できます。
subtopic: Bot rules
title: ボットルールの概要
topic: Admin tools
uuid: 3cb9e29d-1c37-43de-b7ac-34441093a60e
translation-type: tm+mt
source-git-commit: dabaf6247695bc4f3d9bfe668f3ccfca12a52269

---


# ボットルールの概要

ボットルールを使用すると、既知のスパイダーやボットによって生成されるトラフィックをレポートスイートから削除できます。ボットトラフィックを削除すると、Webサイト上のユーザアクティビティをより正確に測定できます。

ボットルールを定義した後、すべての着信トラフィックが定義されたルールと比較されます。 これらのルールのいずれかに一致するトラフィックは、レポートスイートで収集されず、トラフィック指標には含まれません。

ボットルールを更新またはアップロードするには、// **[!UICONTROL Analytics]** に移 **[!UICONTROL Admin]** 動しま **[!UICONTROL Report Suites]**&#x200B;す。 適切なレポートスイートを選択し、/に移 **[!UICONTROL Edit Settings]** 動し **[!UICONTROL General]** ます **[!UICONTROL Bot Rules]**。

通常、ボットトラフィックを削除すると、トラフィックの量とコンバージョン指標が減ります。 多くの顧客は、ボットトラフィックを削除するとコンバージョン率が増え、他のユーザビリティ指標が増えます。 ボットトラフィックを削除する前に、関係者に連絡し、この変更の結果として主要業績評価指標に必要な調整を加えられることを確認します。 調整が可能な場合は、最初に小規模なレポートスイートからボットトラフィックを削除して、発生する可能性がある影響を予測することをお勧めします。

ボットトラフィックデータは、ボットレポートとボットページレポートに表示するために、個別のリポジトリに保存されます。ボットフィルタリングを有効にするには、次の 2 つのオプションがあります。

| ルールタイプ | 説明 |
|--- |--- |
| 標準 IAB ボットルール | Selecting [!UICONTROL Enable IAB Bot Filtering Rules] uses the [IAB&#39;s](https://www.iab.com) (International Advertising Bureau&#39;s) International Spiders &amp; Bots List to remove bot traffic. ほとんどのお客様は、少なくともこのオプションを選択します。 |
| カスタムボットルール | ユーザーエージェント、IP アドレス、または IP 範囲に基づいて、カスタムボットルールを定義して追加できます。 |

## 標準 IAB ボットルール

標準のIABボットルールは、チェックボックスをオンにすることで有効にすることが [!UICONTROL Enable IAB Bot Filtering Rules] できます。 この選択により、ボットトラフィックを削除するために、IAB（International Advertising Bureau）の「International Spiders &amp; Bots List」のボットが削除されます。IAB はこのリストを毎月更新します。

![](assets/bot-iab-checkbox.png)

アドビは詳細な IAB ボットリストをお客様に提供できませんが、ボットレポートを使用して、サイトにアクセスしたボットのリストを表示できます。ボットを IAB リストに送信するには、[IAB](https://www.iab.com) にアクセスします。

## カスタムボットルール

>[!Note]：ユーザーインターフェイスでは 500 個のルールを手動で定義することが可能です。この制限を超える場合は、「ファイルのインポート」および「ボットルールをエクスポート」オプションを使用して、ルールを一括処理する必要があります。

カスタムボットルールを使用すると、定義した条件に基づいてトラフィックをフィルタリングできます。

カスタムボットルールは、次の条件タイプを使用して定義します。

* ユーザーエージェント
* IP アドレス
* IP 範囲

1つのルールに対して複数の条件を定義できます。 複数の条件が「OR」を使用して一致する場合。 例えば、ユーザーエージェントとIPアドレスの値を指定した場合、いずれかの条件が満たされると、トラフィックはボットトラフィックと見なされます。

### ユーザーエージェント

A User Agent condition checks the user agent value to see if it **[!UICONTROL starts with]** or **[!UICONTROL contains]** the specified string. If **[!UICONTROL contains]** is selected, the substring is matched if it occurs anywhere in the user agent.

Optional values can be included in the **[!UICONTROL does not contain]** list to define values that the user agent must not contain for a successful match. 1行に1つの値を含めることで、複数の値を指定できます。 リストエージェントが一致文字列で指定された条件を満たし、かつ、「次を含まない」エージェントの文字列も含む場合、一致とは見なされません。

The **[!UICONTROL contains]** field is limited to 100 characters. 「次を含まない」リストは、255文字から新しい行の区切り文字を引いた文字数に制限されます。 (これは文字列の数 — 1と等しい。 例えば、4 つの「*次を含まない*」文字列を指定する場合、3 つの区切り文字が必要です）。すべての文字列の一致では、大文字と小文字が区別されません。

### IP アドレス（ワイルドカードの照合を含む）

ワイルドカード(*)を使用して、1つのIPアドレスまたは同じブロック内の複数のアドレスに一致させます。 照合するIPアドレスの数値を指定します。 ワイルドカードを使用して照合する値は、*に置き換えます。 次のリストには、IPアドレス一致文字列の例が含まれています。

```
10.10.10.1
10.10.10.*
```

### IP アドレスの範囲

一致するIPアドレスの開始と終了範囲を指定します。 ワイルドカードを使用して照合する値は、*に置き換えます。

### カスタムボットルールを定義する

1. /に移動し **[!UICONTROL Analytics]** 、1つ **[!UICONTROL Admin]**&#x200B;または複数のレポートスイートを選択し、/をクリック **[!UICONTROL General]** しま **[!UICONTROL Bot Rules]**&#x200B;す。
1. Click **[!UICONTROL Add Rule]** and define one or more match conditions.
1. クリック **[!UICONTROL Save]**. 変更が反映されるまで、最大 30 分かかります。

## ボットルールのアップロード

ボットルールを一括インポートするには、ルールを定義したCSVファイルをアップロードします。

次の列をこの順番で指定して CSV ファイルを作成します。

| 列 1 | 列 2 | 列 3 | 列 4 | 列 5 |
|--- |--- |---|---|---|
| ボットの名前 | IP の開始値 | IP の終了値 | エージェントの一致ルール<br>（「次を含む」または「次で始まる」）</br> | 以下を含まないエージェント<br>（255 文字以内）</br> |

次の3種類のボットルールを定義できます。

* ユーザーエージェントに次を含む、または次と開始する
* 単一のIPアドレスまたはワイルドカードの一致
* IP範囲の一致

インポートファイルの各行には、次のボット定義の1つしか含めることができません。

* **ユーザーエージェントに次を含むか、開始**:「以下を含むエージェント」列に、一致する1つのユーザーエージェント文字列を指定します。 「エージェントの一致ルール」フィールドに、「*次を含む*」または「*次で始まる*」を入力して、実行する照合のタイプを指定します。「以下を含まないエージェント」列には、必要に応じて値を指定することができます。この値は、エージェントに含まれない 1 つまたは複数の文字列をパイプ記号（`|`）で区切って定義します。文字列の一致では、大文字と小文字が区別されません。 [IPの開始]列と[IPの終了]列の両方を空にする必要があります。

* **単一の IP アドレスまたはワイルドカードの一致**：単一の IP アドレス（`10.10.10.1`）またはワイルドカード IP アドレス（`10.10.*.*`）を一致させるには、「IP の開始値」列と「IP の終了値」列の両方に同じ値を指定します。「一致ルール」、「以下を含むエージェント」、「以下を含まないエージェント」は空にする必要があります。

* **IP範囲の一致**:「IPアドレス」列と「IP終了」列を使用して、IP開始の範囲を定義します。 IP 範囲の一致にワイルドカードを使用できます（例：`10.10.10.*` から `10.10.20.*`）「一致ルール」、「以下を含むエージェント」、「以下を含まないエージェント」は空にする必要があります。

### OR を使用して複数のルールを組み合わせる

ORで結合されたルールの組み合わせ（例えば、ユーザーエージェントやIPアドレス）を使用してボットを照合するには、ボット名フィールドに組み合わせるすべてのルールに同じ名前を指定します。 AND一致はサポートされていません。

### すべてのルールをアップロードファイルで上書き

すべての既存のルールを削除し、アップロードファイルに定義されているルールで置き換えるには、「**[!UICONTROL Overwrite existing rules]**（既存のルールを上書き）」チェックボックスをオンにします。

### ルールの書き出し

The **[!UICONTROL Export Uploaded Bot File]** button exports all rules defined in the UI in a CSV format.


## データ収集に対するボットルールの影響 {#section_F01A3130E7A04A9993371CF26F6586F2}

ボットルールは、すべての解析データに適用されます。ボットルールによって削除されたデータは、ボットレポートとボットページレポートにのみ表示されます。

VISTA ルールはボットルールの後に適用されます（[処理順序](/help/admin/admin/c-processing-rules/c-processing-rules-configuration/processing-rule-order.md)を参照してください）。

**高ヒット訪問の処理：** 1回の訪問で100件を超えるヒットが発生した場合、レポートは、その訪問の時間（秒）がその訪問のヒット数以下かどうかを判断します。 この場合、長く集中的な訪問、新しい訪問でのレポート開始の処理コストが原因です。 ヒットの多い訪問は、通常、ボット攻撃によって発生し、通常の訪問者閲覧とは見なされません。

>[!NOTE]*`bots`* としてマークされたヒットは[サーバーコール](/help/admin/c-server-call-usage/overage-overview.md)として請求されます。

## ボットフィルタリングに対する IP の不明化の影響 {#section_92E60B95BE8940D983F28C79E0CD6B12}

IABボットリストは、ユーザーエージェントのみに基づいているので、そのリストに基づくフィルタリングは、IPの不明化の設定の影響を受けません。 IAB以外のボットフィルタリング（カスタムルール）の場合、IPがフィルタリング条件の一部に含まれる可能性があります。 IPを使用してボットをフィルタリングする場合、その設定が有効な場合、最後のオクテットが削除された後、IP全体の削除や一意のIDでの置き換えなど、他のIPの不明化オプションの前にボットフィルタリングが行われます。

IPの不明化を有効にすると、IPアドレスが不明化される前にIPの除外が行われるので、IPの不明化を有効にする際に変更を加える必要はありません。

最後のオクテットが削除された場合は、IPフィルタリングの前に行われます。 したがって、最後のオクテットは0に置き換えられ、末尾が0のIPアドレスに一致するようにIP除外ルールを更新する必要があります。 「* に一致」は、0 にも一致します。
