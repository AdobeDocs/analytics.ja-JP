---
description: アドビでは、Data Warehouse リクエストの SFTP サーバーへの書き出しをサポートしています。
keywords: ftp;sftp
title: SFTP サーバーへの Data Warehouse リクエストの送信
feature: FTP Export
exl-id: 45694647-69ec-45e3-b614-4a936909a338
source-git-commit: 25eccb2b9fe3827e62b0ae98d9bebf7a97b239f5
workflow-type: tm+mt
source-wordcount: '421'
ht-degree: 95%

---

# SFTP サーバーへの Data Warehouse リクエストの送信

アドビでは、Data Warehouse リクエストの SFTP サーバーへの書き出しをサポートしています。

以下の作業をおこないます。

アドビでは、以下の条件が満たされた場合に、Data Warehouse リクエストの SFTP サーバーへのエクスポートをサポートします。

* Data Warehouse レポートをリクエストするときに、`sftp://` プロトコルがホストフィールドに指定されており（例：`sftp://ftp.example.com`）、ポート 22 のみが使用されていること。以下のように、`sftp+norename://` オプションを使用することもできます。
* アドビの `authorized_keys` ファイルが、ログインしているユーザーのルートディレクトリ内の `.ssh` ディレクトリにあること。
* 接続先が `ftp.omniture.com` ではないこと。アドビの内部サーバー間では、SFTP プロトコルはサポートされていません。
* 接続先で、1 要素（PKI）認証がサポートされていること。2 要素のチャレンジがある場合、レポートの配信は失敗します。2 要素認証を試行するようにサーバーが設定されていないことを確認します。 Adobe Analytics では、ログインに鍵のみを使用し、その他のものは使用しません。
* アドビでは、SSHv2 暗号化をサポートしています。SSHv2 が使用できない場合は、SSHv1 を使用します（RSA 鍵のみ）。

SFTP 経由でData Warehouseリクエストを正常に送信するには：

1. 組織のサポート対象ユーザーがカスタマーケアに連絡して、`authorized_keys` ファイルを入手します。
1. このファイルを入手したら、Data Warehouse リクエストで使用されているものと同じ資格情報で FTP サイトにログインします。
1. ルートディレクトリの下の `.ssh` という名前のフォルダーに移動し（存在しない場合はこのディレクトリを作成します）、`authorized_keys` ファイルをそこに配置します。

1. Data Warehouse リクエストマネージャーに移動します。必要に応じてリクエストを設定し、「**[!UICONTROL アドバンス配信オプション]**」をクリックします。

1. ポップアップウィンドウで「**[!UICONTROL FTP]**」をクリックし、FTP サイト（`sftp://` プロトコルを含む。例：`sftp://ftp.omniture.com`）とポート 22 を指定します。

   `sftp://` プロトコルは、SFTP を使用する場合にのみ指定できます。通常の FTP リクエストの場合は、プロトコルの接頭辞を省略する必要があります（`ftp://ftp.omniture.com` ではなく `ftp.omniture.com` と指定します）。

1. 「フォルダー」フィールドに、ファイルを配置するフォルダーの名前を入力します。フォルダーは必須です。
1. 手順 2 と同じユーザー名とパスワードを入力します。
1. 「**[!UICONTROL 送信]**」をクリックします。

SFTP の PUT コマンドを使用すると、指定したディレクトリに、.part という拡張子の一時ファイルが配置されます。アップロードが完了すると、ファイルの拡張子が最終的な拡張子に変更され、その時点でファイルが使用できるようになります。

`sftp://` ではなく `sftp+norename://` を指定して、アップロード時に一時的な `.part` ファイル名を付けずに最終的なファイル名でファイルを直接アップロードすることができます。この方法は、SFTP サーバーがアップロード中にファイル名の変更を自動的に処理する場合に適しており、アップロードが完了する前にファイルが処理される可能性はありません。
