---
title: トランザクション ID データソース
description: トランザクション ID データソースの一般的な使用ワークフローについて説明します。
feature: Data Sources
exl-id: 5f26b15c-8d9c-46d5-860f-13fdfa21af2e
source-git-commit: 79294cfc6f86e5a41a39504099cd730f53668725
workflow-type: tm+mt
source-wordcount: '531'
ht-degree: 100%

---

# トランザクション ID データソース

トランザクション ID データソースを使用すると、オンラインデータとオフラインデータを並べて表示できるだけでなく、データを相互に関連付けることができます。Analytics 実装で [`transactionID`](/help/implement/vars/page-vars/transactionid.md) 変数を使用する必要があります。

`transactionID` 値を含むオンラインヒットを送信すると、Adobe は、その時点で設定または持続するすべての変数の「スナップショット」を取得します。データソースからアップロードされた一致するトランザクション ID が見つかると、オフラインデータとオンラインデータが結び付けられます。

トランザクションを使用する場合、トランザクション ID を持つオンラインヒットは、そのトランザクション ID を持つトランザクションデータソースデータが送信される前に、送信して処理する必要があります。オンラインヒットには、トランザクション ID 情報と共に保存されたオンラインヒット上の変数（eVar など）は含まれますが、イベントは含まれません。

トランザクションデータソースヒットが送信された場合は、データソーストランザクションヒットのトランザクション ID で、そのトランザクション ID を持つ元のオンラインヒットに関連付けられた変数など（イベントではない）が検索されます。データソーストランザクションヒットで変数の値が渡されなかった場合は、データソーストランザクションヒットでこれらの変数を使用します。

## 例

トランザクション ID 1256 のオンラインヒットが渡され、その上に `evar1=blue`、`evar2=water` および `event1` が設定されている場合、トランザクション ID 1256 のトランザクションデータは `evar1=blue`、`evar2=water` で保存されます。トランザクション情報の一部としてイベント値が保存されることはありません。

ここで、データソーストランザクションヒットが、トランザクション ID 1256 と `evar1=yellow`、`evar3=mountain` および `event2` が設定された状態でシステムを通過するとします。システムは、保存されたトランザクションデータを見つけ、データソーストランザクションヒットに `evar2=water` を設定します（これは元のヒットに設定されたものなので）。データソーストランザクションヒットに既に `evar1` の値（yellow）が設定されているので、（元のヒットの場合と同様に）`evar1=blue` は設定されません。その結果、データソーストランザクションヒットには、最終的に `evar1=yellow`、`evar2=water`（元のオンラインヒットからの値）および `evar3=mountain` が設定されます。これらの 3 つの eVar 値には `event2` が設定されています。これは、データソーストランザクションヒットからのイベントです。

データソーストランザクションヒットから得られる値は、データソーストランザクションヒットの処理時に `event1` に設定されません。

## トランザクション ID データソースの全体的なワークフロー

トランザクション ID データソースを使用して開始するには、次の汎用ワークフローを使用します。

1. データソース（「汎用」カテゴリと「汎用データソース（トランザクション ID）」タイプ）を作成します。
1. データソース設定ウィザードに従って、データをアップロードしたりデータソーステンプレートファイルをダウンロードしたりするための FTP の場所を取得します。
1. `transactionID` 変数を含めるように実装を更新します。
1. データソースファイルを `.fin` ファイルと共に FTP サイトへとアップロードします。

## アップロードファイルと実装コードの例

次のデータソースファイルをアップロードし、サイトに次のコードを実装すると、レポートでデータがリンクされます。データソースファイルでは eVar1 とイベント 1、オンライン実装では eVar2 とイベント 2 を使用します。トランザクション ID が一致しているので、eVar1 にはイベント 2 データ、eVar2 にはイベント 1 データが表示されます。

### サンプルファイル

テンプレートをダウンロードし、値を更新して、データソースの FTP の場所にアップロードします。

| `#` | `Example eVar1 name` | `Example event 1 name` | `1` |
|---|---|---|---|
| `Date` | `Evar 1` | `Event 1` | `transactionID` |
| `01/01/2020/12/00/00` | `Example eVar1 value` | `1` | `1234` |

### 実装コードの例

トランザクションIDの詳細については、実装ユーザーガイドの [`transactionID`](/help/implement/vars/page-vars/transactionid.md) を参照してください。

```js
var s = s_gi("examplersid");
s.eVar2 = "Example eVar2 value";
s.events = "event2";
s.transactionID = "1234";
s.t();
```
