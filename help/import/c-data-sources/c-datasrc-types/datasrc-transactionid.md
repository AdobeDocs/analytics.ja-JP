---
title: トランザクション ID データソース
description: トランザクション ID データソースの一般的な使用ワークフローについて説明します。
exl-id: 5f26b15c-8d9c-46d5-860f-13fdfa21af2e
source-git-commit: 4497ca252c4ee05175141e58d784ca2df215cb94
workflow-type: tm+mt
source-wordcount: '531'
ht-degree: 45%

---

# トランザクション ID データソース

トランザクション ID データソースを使用すると、オンラインデータとオフラインデータを並べて表示できるだけでなく、データを相互に関連付けることができます。Analytics 実装で [`transactionID`](/help/implement/vars/page-vars/transactionid.md) 変数を使用する必要があります。

`transactionID` 値を含むオンラインヒットを送信すると、Adobe は、その時点で設定または持続するすべての変数の「スナップショット」を取得します。データソースからアップロードされた一致するトランザクション ID が見つかると、オフラインデータとオンラインデータが結び付けられます。

トランザクションを使用する場合、トランザクションIDを持つオンラインヒットは、トランザクションIDを持つトランザクションデータソースデータが送信される前に、送信されて処理される必要があります。 オンラインヒットには、トランザクションID情報と共に保存されたオンラインヒット上の変数（eVarなど）は含まれますが、イベントは含まれません。

トランザクションデータソースヒットが送信されると、データソーストランザクションヒットのトランザクションIDで変数を調べます。 （イベントではなく）元のオンラインヒットに関連付けられたトランザクションID。 データソーストランザクションヒットで渡された変数に値がない場合、データソーストランザクションヒットでこれらの変数が使用されます。

## 例

トランザクションIDが1256のオンラインヒットが渡され、`evar1=blue`、`evar2=water`、`event1`が設定された場合、トランザクションIDが1256のトランザクションデータは`evar1=blue`、`evar2=water`で保存されます。 トランザクション情報の一部としてイベント値が保存されない。

次に、データソーストランザクションヒットが、トランザクションID 1256と`evar1=yellow`、`evar3=mountain`、`event2`が設定されたシステムを通過したとします。 保存されたトランザクションデータと、データソーストランザクションヒットセット`evar2=water`内で（元のヒットで設定されたものなので）検索されます。 （元のヒットと同じく）`evar1=blue`は設定されません。これは、データソーストランザクションヒットに既に`evar1`（黄色）の値が設定されているからです。  したがって、データソースのトランザクションヒットの結果、`evar1=yellow`、`evar2=water`（元のオンラインヒットから）、`evar3=mountain`が返されます。 これらの3つのeVar値は、`event2`が設定され、データソーストランザクションのヒットのイベントです。

データソーストランザクションヒットの処理時に、データソーストランザクションヒットの値が`event1`設定されない。

## トランザクション ID データソースの全体的なワークフロー

トランザクション ID データソースを使用して開始するには、次の汎用ワークフローを使用します。

1. データソース（「汎用」カテゴリと「汎用データソース（トランザクション ID）」タイプ）を作成します。
1. データソース設定ウィザードに従って、FTPの場所を取得し、データをアップロードしてデータソーステンプレートファイルをダウンロードします。
1. `transactionID` 変数を含めるように実装を更新します。
1. データソースファイルを `.fin` ファイルと共に FTP サイトへとアップロードします。

## アップロードファイルと実装コードの例

次のデータソースファイルをアップロードし、サイトに次のコードを実装すると、レポートでデータがリンクされます。データソースファイルでは eVar1 とイベント 1、オンライン実装では eVar2 とイベント 2 を使用します。トランザクション ID が一致しているので、eVar1 にはイベント 2 データ、eVar2 にはイベント 1 データが表示されます。

### サンプルファイル

テンプレートをダウンロードし、値を更新して、データソースの FTP の場所にアップロードします。

| `#` | `Example eVar1 name` | `Example event 1 name` | `1` |
|---|---|---|---|
| `Date` | `Evar 1` | `Event 1` | `transactionID` |
| `01/01/2020/12/00/00` | `Example eVar1 value` | `1` | `1234` |

### 実装コードの例

トランザクションIDの詳細については、実装ユーザーガイドの [`transactionID`](/help/implement/vars/page-vars/transactionid.md) を参照してください。

```js
var s = s_gi("examplersid");
s.eVar2 = "Example eVar2 value";
s.events = "event2";
s.transactionID = "1234";
s.t();
```
